<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đình Hường ❤ Khánh Linh</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  overflow:hidden;
  background:#000;
  font-family: "Segoe UI", sans-serif;
  color:white;
}
canvas{
  position:fixed;
  top:0;left:0;
}
#ui{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  z-index:10;
  pointer-events:none;
}
#title{
  font-size:52px;
  font-weight:bold;
  background:linear-gradient(90deg,#ff4fd8,#fff,#ff0077,#00ffff);
  background-size:300% 300%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  text-shadow:0 0 20px rgba(255,0,150,0.8);
  letter-spacing:2px;
  animation:glow 2s infinite alternate, gradientMove 6s infinite linear;
}
@keyframes glow{
  from{ text-shadow:0 0 10px #ff00aa;}
  to{ text-shadow:0 0 40px #ff66ff,0 0 80px #ff0088;}
}
@keyframes gradientMove{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* glitch chữ hacker */
.glitch{
  position:relative;
}
.glitch::before,
.glitch::after{
  content:attr(data-text);
  position:absolute;
  left:0;
  top:0;
  opacity:0.6;
}
.glitch::before{
  color:#00ffcc;
  animation:glitch 2s infinite;
}
.glitch::after{
  color:#ff00cc;
  animation:glitch 1.5s infinite reverse;
}
@keyframes glitch{
  0%{transform:translate(0,0);}
  20%{transform:translate(-2px,2px);}
  40%{transform:translate(2px,-2px);}
  60%{transform:translate(-1px,1px);}
  80%{transform:translate(1px,-1px);}
  100%{transform:translate(0,0);}
}
</style>
</head>
<body>

<canvas id="bg"></canvas>
<canvas id="heart"></canvas>
<canvas id="matrix"></canvas>

<div id="ui">
  <div id="title" class="glitch" data-text=""></div>
</div>

<script>
  // ================= TEXT TYPEWRITER =================
  const loveText = "Đình Hường ❤ Khánh Linh";
  let ti = 0;
  const titleEl = document.getElementById("title");
  
  function typeText(){
    if(ti < loveText.length){
      titleEl.innerHTML += loveText[ti];
      titleEl.setAttribute("data-text", titleEl.innerHTML);
      ti++;
      setTimeout(typeText, 120);
    }
  }
  typeText();
  
  // ================= CANVAS SETUP =================
  const bg = document.getElementById("bg");
  const heartCanvas = document.getElementById("heart");
  const matrixCanvas = document.getElementById("matrix");
  const bctx = bg.getContext("2d");
  const hctx = heartCanvas.getContext("2d");
  const mctx = matrixCanvas.getContext("2d");
  
  function resize(){
    [bg, heartCanvas, matrixCanvas].forEach(c=>{
      c.width = innerWidth;
      c.height = innerHeight;
    });
  }
  window.onresize = resize;
  resize();
  
  // ================= MATRIX HACKER RAIN =================
  const chars = "01ABCDEFGHIJKLMNOPQRSTUVWXYZ#$%&@";
  const drops = Array(Math.floor(innerWidth/20)).fill(0);
  
  function drawMatrix(){
    mctx.fillStyle = "rgba(0,0,0,0.05)";
    mctx.fillRect(0,0,matrixCanvas.width,matrixCanvas.height);
    mctx.fillStyle = "#00ff99";
    mctx.font = "16px monospace";
    for(let i=0;i<drops.length;i++){
      const text = chars[Math.floor(Math.random()*chars.length)];
      mctx.fillText(text, i*20, drops[i]*20);
      if(drops[i]*20 > matrixCanvas.height && Math.random() > 0.97){
        drops[i]=0;
      }
      drops[i]++;
    }
  }
  setInterval(drawMatrix,50);
  
  // ================= HEART POINTS =================
  let particles = [];
  const heartPoints = [];
  
  function generateHeartPoints(scale=16){
    heartPoints.length=0;
    for(let t=0;t<Math.PI*2;t+=0.02){
      const x = scale*Math.pow(Math.sin(t),3);
      const y = -(scale*0.8*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))/13);
      heartPoints.push({x,y});
    }
  }
  generateHeartPoints();
  
  // ================= INIT PARTICLES =================
  function initParticles(count=1500){
    particles=[];
    for(let i=0;i<count;i++){
      const p = heartPoints[Math.floor(Math.random()*heartPoints.length)];
      particles.push({
        x: Math.random()*innerWidth,
        y: Math.random()*innerHeight,
        tx: innerWidth/2 + p.x*16,
        ty: innerHeight/2 + p.y*16,
        vx:0, vy:0,
        size: Math.random()*2+1.5,
        hue: Math.random()*360
      });
    }
  }
  initParticles();
  
  // ================= HEART ANIMATION =================
  let time=0;
  let dissolve=false;
  let finalMode=false;
  
  function animateHeart(){
    hctx.clearRect(0,0,heartCanvas.width,heartCanvas.height);
    time+=0.01;
  
    const rot = Math.sin(time*0.6)*0.4;
  
    particles.forEach(p=>{
      let dx = p.tx - p.x;
      let dy = p.ty - p.y;
  
      if(dissolve){
        dx = (Math.random()*innerWidth - p.x);
        dy = (Math.random()*innerHeight - p.y);
      }
  
      p.vx += dx*0.002;
      p.vy += dy*0.002;
      p.vx *= 0.93;
      p.vy *= 0.93;
      p.x += p.vx;
      p.y += p.vy;
  
      p.hue = (p.hue + 0.6) % 360;
  
      const glow = Math.sin(time*3)*0.5+0.5;
      const px = innerWidth/2 + (p.x-innerWidth/2)*Math.cos(rot);
      const py = p.y;
  
      hctx.beginPath();
      hctx.arc(px,py,p.size,0,Math.PI*2);
      hctx.fillStyle = `hsla(${p.hue},100%,70%,${0.7+glow})`;
      hctx.fill();
    });
  
    // ===== FINAL BIG HEART EFFECT =====
    if(finalMode){
      drawFinalHeart();
    }
  
    requestAnimationFrame(animateHeart);
  }
  animateHeart();
  
  // ================= NETWORK LINES =================
  function drawLines(){
    for(let i=0;i<particles.length;i+=30){
      for(let j=i+30;j<i+120 && j<particles.length;j++){
        const a=particles[i], b=particles[j];
        const d=Math.hypot(a.x-b.x,a.y-b.y);
        if(d<160){
          hctx.beginPath();
          hctx.moveTo(a.x,a.y);
          hctx.lineTo(b.x,b.y);
          hctx.strokeStyle="rgba(255,0,200,0.3)";
          hctx.stroke();
        }
      }
    }
  }
  setInterval(drawLines,60);
  
  // ================= AURA / ENERGY RINGS =================
  function drawFinalHeart(){
    const cx = innerWidth/2;
    const cy = innerHeight/2;
    const baseR = 320;
  
    // glow halo
    const grad = hctx.createRadialGradient(cx,cy,baseR*0.2,cx,cy,baseR);
    grad.addColorStop(0,"rgba(255,0,150,0.5)");
    grad.addColorStop(1,"rgba(255,0,150,0)");
    hctx.beginPath();
    hctx.arc(cx,cy,baseR,0,Math.PI*2);
    hctx.fillStyle = grad;
    hctx.fill();
  
    // energy rings
    for(let i=0;i<4;i++){
      const r = baseR + i*40 + Math.sin(time*2+i)*15;
      hctx.beginPath();
      hctx.arc(cx,cy,r,0,Math.PI*2);
      hctx.strokeStyle=`rgba(255,0,200,${0.2-i*0.03})`;
      hctx.lineWidth=2;
      hctx.stroke();
    }
  }
  
  // ================= SHOCKWAVE CLICK =================
  document.addEventListener("click",e=>{
    particles.forEach(p=>{
      const dx=p.x-e.clientX;
      const dy=p.y-e.clientY;
      const d=Math.hypot(dx,dy)+1;
      p.vx += dx/d*6;
      p.vy += dy/d*6;
    });
  });
  
  // ================= BACKGROUND STARS =================
  let stars=[];
  for(let i=0;i<350;i++){
    stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*2});
  }
  function drawStars(){
    bctx.clearRect(0,0,bg.width,bg.height);
    stars.forEach(s=>{
      bctx.beginPath();
      bctx.arc(s.x,s.y,s.r,0,Math.PI*2);
      bctx.fillStyle="white";
      bctx.fill();
    });
    requestAnimationFrame(drawStars);
  }
  drawStars();
  
  // ================= TEXT FLOAT =================
  document.addEventListener("mousemove",e=>{
    const x=(e.clientX/innerWidth-0.5)*25;
    const y=(e.clientY/innerHeight-0.5)*25;
    document.getElementById("ui").style.transform=
      `translate(-50%,-50%) translate(${x}px,${y}px)`;
  });
  
  // ================= CINEMATIC TIMELINE =================
  
  // tan rã → ghép lại
  setInterval(()=>{
    dissolve=true;
    setTimeout(()=>dissolve=false,1500);
  },12000);
  
  // ===== FINAL BIG HEART MODE (SAU 20s) =====
  setTimeout(()=>{
    finalMode=true;
  
    // phóng to hình tim
    generateHeartPoints(28);
    initParticles(2500);
  
    // chữ bay nhẹ theo tim
    document.getElementById("title").style.fontSize="64px";
    document.getElementById("title").style.textShadow="0 0 40px #ff00ff, 0 0 80px #ff0088";
  
  },20000);
  </script>
  

</body>
</html>
