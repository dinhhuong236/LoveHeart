<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Đình Hường ❤️ Khánh Linh</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap&subset=vietnamese" rel="stylesheet">

<style>
html,body{
    margin:0;
    padding:0;
    background:#000;
    overflow:hidden;
    height:100%;
    font-family:'Great Vibes', cursive;
}
canvas{
    position:fixed;
    inset:0;
}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let W,H,centerX,centerY;
function resize(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
    centerX = W/2;
    centerY = H/2.1;
}
resize();
window.addEventListener("resize", resize);

/* ===============================
   HEART SHAPE
================================*/
function heart(t){
    return {
        x:16*Math.pow(Math.sin(t),3),
        y:13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)
    };
}

/* ===============================
   MAIN HEART PARTICLES
================================*/
let heartParticles=[];
const HEART_COUNT=1800; // tối ưu hiệu năng

function createMainHeart(){
    for(let i=0;i<HEART_COUNT;i++){
        const t=Math.random()*Math.PI*2;
        const p=heart(t);

        const edgeDensity=Math.random();
        const scale=H/45;

        heartParticles.push({
            baseX:p.x*scale,
            baseY:-p.y*scale,
            angle:Math.random()*Math.PI*2,
            size: edgeDensity>0.6?2.8:1.8,
            opacity: edgeDensity>0.6?1:0.5,
            sparkle:Math.random()*Math.PI*2
        });
    }
}
createMainHeart();

let heartOpacity=1;
let heartSpeed=1;

/* ===============================
   FIREWORKS
================================*/
let fireworks=[];
function createFirework(){
    const x=Math.random()*W;
    const y=Math.random()*H*0.5;
    const count=25+Math.random()*25;

    for(let i=0;i<count;i++){
        const a=Math.random()*Math.PI*2;
        const s=Math.random()*2+1;
        fireworks.push({
            x,y,
            vx:Math.cos(a)*s,
            vy:Math.sin(a)*s,
            life:60,
            size:Math.random()*2+1
        });
    }
}
setInterval(createFirework,1200);

/* ===============================
   TEXT PARTICLES
================================*/
let textParticles=[];
let showText=false;

function createTextParticles(){
    const temp=document.createElement("canvas");
    const tctx=temp.getContext("2d");
    temp.width=W;
    temp.height=H;

    tctx.fillStyle="#fff";
    tctx.textAlign="center";
    tctx.font="bold 60px 'Great Vibes'";
    tctx.fillText("Đình Hường", W/2, H/2-30);
    tctx.fillText("<3", W/2, H/2+10);
    tctx.fillText("Khánh Linh", W/2, H/2+60);

    const data=tctx.getImageData(0,0,W,H).data;

    for(let y=0;y<H;y+=5){
        for(let x=0;x<W;x+=5){
            const i=(y*W+x)*4;
            if(data[i+3]>150){
                textParticles.push({
                    x:Math.random()*W,
                    y:Math.random()*H,
                    tx:x,
                    ty:y,
                    size:1.8
                });
            }
        }
    }
}

setTimeout(()=>{
    createTextParticles();
    showText=true;
    heartOpacity=0.5;
    heartSpeed=0.3;
},3000);

/* ===============================
   DRAW HEART ICON
================================*/
function drawMiniHeart(x,y,size,color,opacity){
    ctx.save();
    ctx.translate(x,y);
    ctx.scale(size,size);
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.bezierCurveTo(0,-3,-5,-3,-5,0);
    ctx.bezierCurveTo(-5,3,0,6,0,8);
    ctx.bezierCurveTo(0,6,5,3,5,0);
    ctx.bezierCurveTo(5,-3,0,-3,0,0);
    ctx.fillStyle=color;
    ctx.globalAlpha=opacity;
    ctx.shadowBlur=8;
    ctx.shadowColor="#ff66cc";
    ctx.fill();
    ctx.restore();
}

/* ===============================
   ANIMATION LOOP
================================*/
function animate(){
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,W,H);

    /* Fireworks */
    fireworks.forEach((f,i)=>{
        f.x+=f.vx;
        f.y+=f.vy;
        f.vy+=0.03;
        f.life--;
        drawMiniHeart(f.x,f.y,f.size,"#ff99cc",f.life/60);
        if(f.life<=0)fireworks.splice(i,1);
    });

    /* Main Heart */
    heartParticles.forEach(p=>{
        p.sparkle+=0.05*heartSpeed;
        const scale3d=1+Math.sin(p.sparkle)*0.1;

        drawMiniHeart(
            centerX+p.baseX*scale3d,
            centerY+p.baseY*scale3d,
            p.size,
            p.opacity>0.8?"#ff66cc":"#ffd6ec",
            heartOpacity*p.opacity
        );
    });

    /* Text */
    if(showText){
        const t=Date.now()*0.0003;

        textParticles.forEach(p=>{
            p.x+=(p.tx-p.x)*0.05;
            p.y+=(p.ty-p.y)*0.05;
            drawMiniHeart(p.x,p.y,p.size,"#ffffff",1);
        });

        // xoay nhẹ 2 dòng tên
        ctx.save();
        ctx.translate(centerX,centerY+10);
        ctx.rotate(t);
        ctx.restore();
    }

    requestAnimationFrame(animate);
}
animate();

</script>
</body>
</html>
