<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Love Heart Animation</title>

<!-- Wedding Font hỗ trợ tiếng Việt -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

<style>
html,body{
    margin:0;
    padding:0;
    overflow:hidden;
    background:black;
    height:100%;
    width:100%;
}

canvas{
    position:fixed;
    top:0;
    left:0;
}

#textContainer{
    position:absolute;
    width:100%;
    text-align:center;
    top:50%;
    transform:translateY(-50%);
    font-family:'Great Vibes', cursive;
    color:white;
    pointer-events:none;
}

.name{
    font-size:48px;
    opacity:0;
    transition:opacity 2s ease;
}

#centerHeart{
    font-size:40px;
    opacity:0;
    transition:opacity 2s ease;
}

.rotateLeft{
    animation:rotateLeft 8s linear infinite;
}

.rotateRight{
    animation:rotateRight 8s linear infinite;
}

@keyframes rotateLeft{
    from{transform:rotate(0deg);}
    to{transform:rotate(360deg);}
}

@keyframes rotateRight{
    from{transform:rotate(0deg);}
    to{transform:rotate(360deg);}
}

</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="textContainer">
    <div id="leftName" class="name">Đình Hường</div>
    <div id="centerHeart">&lt;3</div>
    <div id="rightName" class="name">Khánh Linh</div>
</div>

<script>

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let particles = [];
let fireworks = [];
let slowMode = false;

function heartShape(t){
    return {
        x:16*Math.pow(Math.sin(t),3),
        y:13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)
    };
}

class Particle{
    constructor(){
        let t = Math.random()*Math.PI*2;
        let pos = heartShape(t);

        this.targetX = canvas.width/2 + pos.x*15;
        this.targetY = canvas.height/2 - pos.y*15;

        this.x = Math.random()*canvas.width;
        this.y = Math.random()*canvas.height;

        this.size = Math.random()*4+1;
        this.opacity = Math.random();
    }

    update(){
        let speed = slowMode ? 0.01 : 0.05;
        this.x += (this.targetX - this.x)*speed;
        this.y += (this.targetY - this.y)*speed;
    }

    draw(){
        ctx.fillStyle = `rgba(255,105,180,${this.opacity})`;
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
        ctx.fill();
    }
}

class Firework{
    constructor(){
        this.x = Math.random()*canvas.width;
        this.y = Math.random()*canvas.height/2;
        this.particles = [];
        for(let i=0;i<40;i++){
            this.particles.push({
                x:this.x,
                y:this.y,
                angle:Math.random()*Math.PI*2,
                speed:Math.random()*3+2,
                life:100
            });
        }
    }

    update(){
        this.particles.forEach(p=>{
            p.x += Math.cos(p.angle)*p.speed;
            p.y += Math.sin(p.angle)*p.speed;
            p.life--;
        });
    }

    draw(){
        this.particles.forEach(p=>{
            ctx.fillStyle="rgba(255,182,193,"+(p.life/100)+")";
            ctx.beginPath();
            ctx.arc(p.x,p.y,3,0,Math.PI*2);
            ctx.fill();
        });
    }
}

for(let i=0;i<1500;i++){
    particles.push(new Particle());
}

function animate(){
    ctx.fillStyle="rgba(0,0,0,0.2)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    particles.forEach(p=>{
        p.update();
        p.draw();
    });

    fireworks.forEach(f=>{
        f.update();
        f.draw();
    });

    requestAnimationFrame(animate);
}

animate();

setInterval(()=>{
    fireworks.push(new Firework());
},800);

setTimeout(()=>{
    slowMode = true;
    document.getElementById("leftName").style.opacity=1;
    document.getElementById("rightName").style.opacity=1;
    document.getElementById("centerHeart").style.opacity=1;

    document.getElementById("leftName").classList.add("rotateLeft");
    document.getElementById("rightName").classList.add("rotateRight");
},3000);

</script>

</body>
</html>
